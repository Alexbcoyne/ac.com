<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Alexander Coyne | Computing & IT Undergraduate</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }
    body { background: #f5f5f5; color: #111; line-height: 1.6; }
    a { text-decoration: none; }

    /* Hero Section */
    .hero { display: flex; flex-wrap: wrap; min-height: 100vh; }
    .hero .left { flex: 1; background: url('portrait.jpg') center/cover no-repeat; min-height: 300px; }
    .hero .right { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: flex-start; padding: 80px; background: #f5f5f5; }
    h1 { font-size: 3rem; font-weight: 600; }
    p { margin-top: 8px; font-size: 1.1rem; color: #555; }
    .email-btn { margin-top: 30px; padding: 12px 28px; border: 1.5px solid #000; background: transparent; color: #000; font-size: 1rem; border-radius: 6px; transition: all 0.3s ease; }
    .email-btn:hover { background: #000; color: #fff; }

    /* Sections */
    section { padding: 80px; max-width: 900px; margin: 0 auto; }
    .section-title { font-size: 2rem; margin-bottom: 20px; }

    /* Spotify Card */
    .spotify-card { display: flex; align-items: center; background: #1db954; color: #fff; padding: 20px; border-radius: 12px; }
    .spotify-card img { width: 64px; height: 64px; margin-right: 20px; border-radius: 6px; }

    @media (max-width: 800px) {
      .hero { flex-direction: column; }
      .hero .right { align-items: center; text-align: center; padding: 40px; }
      h1 { font-size: 2.4rem; }
      section { padding: 40px; }
      .spotify-card { flex-direction: column; text-align: center; }
      .spotify-card img { margin-bottom: 12px; }
    }
  </style>
</head>
<body>

  <!-- Hero -->
  <div class="hero">
    <div class="left"></div>
    <div class="right">
      <h1>Alexander Coyne</h1>
      <p>Computing & IT Undergraduate</p>
      <a href="mailto:ac@alexandercoyne.com" class="email-btn">Email me</a>
    </div>
  </div>

  <!-- About Me -->
  <section id="about">
    <h2 class="section-title">About Me</h2>
    <p>Hello! I'm Alexander, a Computing & IT undergraduate passionate about technology, coding, and exploring the world—one coffee and Guinness at a time. I love building projects that combine creativity with practical problem-solving, and I’m always looking for new ways to learn and grow.</p>
  </section>

  <!-- Spotify -->
  <section id="spotify">
    <h2 class="section-title">Currently Listening</h2>
    <div class="spotify-card">
      <img src="album-placeholder.jpg" alt="Album Art">
      <div>
        <p><strong>Loading...</strong></p>
        <p></p>
      </div>
    </div>
  </section>

  <!-- Spotify Script -->
  <script>
    async function loadSpotify() {
      try {
        const res = await fetch('/spotify'); // Cloudflare function
        const data = await res.json();

        if (!data.playing && !data.item) {
          document.querySelector('.spotify-card div p:nth-child(1)').textContent = "Nothing playing right now";
          document.querySelector('.spotify-card div p:nth-child(2)').textContent = "";
          document.querySelector('.spotify-card img').src = "album-placeholder.jpg";
          return;
        }

        const songTitle = data.item.name;
        const artist = data.item.artists[0].name;
        const album = data.item.album.name;
        const albumImage = data.item.album.images[0].url;

        document.querySelector('.spotify-card img').src = albumImage;
        document.querySelector('.spotify-card div p:nth-child(1)').innerHTML = `<strong>${songTitle}</strong> by ${artist}`;
        document.querySelector('.spotify-card div p:nth-child(2)').textContent = album;

      } catch (err) {
        console.error("Spotify fetch error:", err);
      }
    }

    loadSpotify();
  </script>

</body>
</html>
